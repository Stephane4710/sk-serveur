<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>SK Serveur</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    background:#0b0f17;
    color:#fff;
    font-family:Arial,sans-serif;
    margin:0;
}
.container{width:90%;margin:auto;}

.header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin:30px 0;
    gap:20px;
}
.header-actions{display:flex;gap:10px;}

.btn{
    padding:10px 16px;
    border-radius:10px;
    text-decoration:none;
    font-weight:bold;
}
.login{background:#4e8cff;color:#fff;}
.register{background:#22c55e;color:#000;}

.search{
    display:flex;
    gap:10px;
    margin-bottom:30px;
}
.search input{
    flex:1;
    padding:12px;
    border-radius:12px;
    border:none;
    background:#0f172a;
    color:#fff;
}
.search button{
    padding:12px 20px;
    border:none;
    border-radius:12px;
    background:#4e8cff;
    color:#fff;
    font-weight:bold;
}

.cards{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:20px;
}
.card{
    background:rgba(255,255,255,0.06);
    padding:16px;
    border-radius:16px;
}
.card img{
    width:100%;
    height:180px;
    object-fit:contain;
    background:#0f172a;
    border-radius:12px;
    margin-bottom:10px;
}
.price{color:#4e8cff;font-weight:bold;}
.commander{
    display:block;
    margin-top:10px;
    text-align:center;
    background:#facc15;
    color:#000;
    padding:10px;
    border-radius:10px;
    text-decoration:none;
    font-weight:bold;
}

.whatsapp-float{
    position:fixed;
    bottom:20px;
    right:20px;
    background:#25D366;
    color:#fff;
    padding:14px 18px;
    border-radius:50px;
    font-weight:bold;
    cursor:pointer;
    box-shadow:0 10px 20px rgba(0,0,0,.4);
}

.whatsapp-modal{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.6);
}
.whatsapp-box{
    background:#0f172a;
    width:90%;
    max-width:320px;
    margin:120px auto;
    padding:20px;
    border-radius:16px;
    text-align:center;
}
.whatsapp-box a{
    display:block;
    margin:10px 0;
    padding:12px;
    border-radius:12px;
    background:#25D366;
    color:#fff;
    text-decoration:none;
    font-weight:bold;
}
.close{margin-top:10px;color:#aaa;cursor:pointer;}

@media(max-width:768px){
    .header{flex-direction:column;text-align:center;}
    .header-actions{flex-direction:column;width:100%;}
    .btn{width:100%;}
    .search{flex-direction:column;}
    .cards{grid-template-columns:1fr;}
}
</style>
</head>

<body>

<div class="container">

<div class="header">
    <h1><span style="color:#4e8cff;">SK</span> Serveur</h1>
    <div class="header-actions">
        <a href="{% url 'login' %}" class="btn login">Se connecter</a>
        <a href="{% url 'register' %}" class="btn register">Sâ€™inscrire</a>
    </div>
</div>

<form method="get" class="search">
    <input type="text" name="q" placeholder="Rechercher un service" value="{{ query }}">
    <button>Rechercher</button>
</form>

{% for cat in categories %}
    <h2 style="margin-top:40px;color:#4e8cff;">{{ cat.nom }}</h2>

    <div class="cards">

    {% for lic in cat.licences.all %}
    <div class="card">
        {% if lic.image %}
        <img src="{{ lic.image }}" alt="{{ lic.nom }}">
        {% endif %}
        <h3>{{ lic.nom }}</h3>
        <div class="price">{{ lic.prix }} FCFA</div>
        <p>{{ lic.destription }}</p>
        <a href="{% url 'login' %}" class="commander">ðŸ›’ Commander</a>
    </div>
    {% endfor %}

    {% for s in cat.services.all %}
    <div class="card">
        <h3>{{ s.nom }}</h3>
        <div class="price">{{ s.prix }} FCFA</div>
        <p>{{ s.destription }}</p>
        <a href="{% url 'login' %}" class="commander">ðŸ›’ Commander</a>
    </div>
    {% endfor %}

    {% for srv in cat.services_generaux.all %}
    <div class="card">
        {% if srv.image %}
            <img src="{{ srv.image }}" alt="{{ srv.nom }}">
        {% endif %}
        <h3>{{ srv.nom }}</h3>
        <div class="price">{{ srv.prix }} FCFA</div>
        <p>{{ srv.description }}</p>
        <a href="{% url 'login' %}" class="commander">ðŸ›’ Commander</a>
    </div>
    {% endfor %}

</div>

{% endfor %}

</div>

<div class="whatsapp-float" onclick="openWhatsApp()">ðŸ’¬ WhatsApp</div>

<div class="whatsapp-modal" id="whatsappModal">
    <div class="whatsapp-box">
        <h3>Choisissez un numÃ©ro</h3>
        <a href="https://wa.me/2250757045224" target="_blank">ðŸ“ž 0757045224</a>
        <a href="https://wa.me/2250748563034" target="_blank">ðŸ“ž 0748563034</a>
        <div class="close" onclick="closeWhatsApp()">Fermer</div>
    </div>
</div>

<script>
function openWhatsApp(){document.getElementById("whatsappModal").style.display="block";}
function closeWhatsApp(){document.getElementById("whatsappModal").style.display="none";}
</script>

</body>
</html>
